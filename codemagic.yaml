# Automatically generated on 2021-03-08 UTC from https://codemagic.io/app/6045bd26be2f9fe47542401b/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    instance_type: mac_mini
    max_build_duration: 60
    environment:
      flutter: 1.22.6
      xcode: latest
      cocoapods: default
      vars:
        # Firebase secrets
        ANDROID_FIREBASE_SECRET: Encrypted(Z0FBQUFBQmdSY0VPNWN2b1RsR1ZLM19YeWlqRXZmd05QQ0JReEdUQUl4djBRYkpkeUVGbUZJek5vNFhnaXBtdlhVSXhpRHVwQmhTOGZraEhsZGFOYS1xcmhnS0ZENHFlRzB4bHhDMUN0b2x3M09QaW9Jc003QUVJbUZ2dEdjd0pvRnQ4N2hCY1V5eGp5aXpUUzBranRSVGpGaWtCcHVNRGlrMWU2ai1uNzJKczRNYVhVZllmMFZnWkJJV283UnJPV1hPdGl3T1QzeFBsenlwYnEtQklrMHVpWWsycHZoaUpNSTBFYlBQdG52Qk5LWEdqMVJZV2JDRWdsOHF6azBkVkdNNm50eDFKVkY5SWZma1dqcjNhWlhLU0txUGtxZDFVNkx4TmI4VGNvNkU1SW5MdUdCNWNKUDhwY2sxVjRid1VaZ3dUYnVJRTI4bjVRYkhOcnNmYVdtV1hLYkhFenQ4U1M4bU84WEkxSkhGd29RR05JSFdUeVFham5SWFQxTUJreE50TTRyYUFnU3ozVmJ5ZkVZc1o2ZVFPdm8zWFRoeHpoUUlNVWJHTjZDaFVROGxqYTc1ZEpnMElaeENvWjh1bndEellCdUVEeHdvbzFEei14dzZ5bS10UXphVXM4MEFHVk9vTk5KOHVVTmNreXdtTm5MdnQwR3Y2MGlPZ3N1b2pNbEl5Q2VjNjlMRnlyVDAyc0JyY3ZTWHd0YVN2WWZ6cWk2R0JYZzlyX0E0TF9SREFDT0M1OERTdldsaGd6aUc5QXhtU1R0d2t5UDRRUUFyLWRtcGo2aGFXc0RpRHZIZjNSLWpMOWU1X2JNT2hTRGdvVVhkcTBvaS01Ylg2MlhNMXgwUGVNUjZKQ0JWSjQ4U25fa0VYVEc2MmNoVGlqR3AxNlI0NWYxeHlYYVJWVzdRd2ZHYmVDNDdnU0VRYzk2bGlWR1JrQ0NveDQ4NkFHelEwWmk0TkdIRHQ0TkZRUzdKbWhVUFhzc25DUUt6Vm84RUFtRm8wYW5sUjkxTkpwYlBPOVpzLVV6M241YnFyeFJjSlhRY2hUYjBrYzY1MEVlU1V4VXN3QkstX2RQTjRjSFdNeVpyRGhRMC1NNjNJQzREMTFGcDMzOHQtQ2RDcDVIZjkycTRjRnFDc2M1TnExV0Y0SGVjMXVPU1AyM2RpbFNoaGR3Y1J0bW5RZ2RuaV9VbFVVOWZKRFIzaGhxWWdMS0ZXTUhXdUJhWjJwcVRPT0hkeE5uZmhEdE9GZEZCcUxrbk5oOFhOOGxRUTR0N3pNb1hWS1c3TEZNaVFDVThoUmVRT0U3MTRnV1oyQ1FwN1h5bWZnUXVtaWFDNVBWb3hsMGRJSlpuS2NaSkVSMHBlYVRqcUNrbmJxQVBiQ0EyVFVOLTFZNjdvUDcyOVozSjJuQzZLRDhxNmZyNG9wMjkyQzZ6QUtjeXA4elNuQndLaFh2QjlPTm9tYS05bU9JOGh3aW5EUFFxaWVPaV9RVUszUW5VeDJTMFZDVjlXS1pTekthTkk3YmxZM1RVazNveXlNeWpDMkhQakJkZTRMNm9Pb01rOEplWGtaRFRlNjY0NDBaSjVXR2RjbmpNaWhJZTdQQzhkalNQVDl5M2gyX0swODFKdjBydFlDanBzbk13QW43bUNPeVZHcVV3b2hfX0NCMnJST21lWEdERHpqTUZaQ25WQnVhaXI1WW5COXctWG5KdWZqVkZBd0N6dXFzWTZEVFo5YUxuTjNsZVVGblU3dEMwT2R6U2JEWlFRdHNRNUJzWnRSaHdhZ2tmZHVudFVMMDMwZWc3MFFaX05NM3NrYTlPeHBXbTZ3ODZXVXI0bzRCZ2l1dU5SNmEwM2lySDRucmRxS3FvRGlaZkltZ0xudWJJYTBucVBiOU91QUMwVWNJd1FhbTdfUGlJR2FWa0owdHVYMkFaTmJXRnF5clQ0ekoxUEVDZ3RhaHJvSGtmN09oQklVbnBEYnMySmx6ckJabWh0MUgyY3FObmVhaUZPV3lxTm50cWhxajVuNjNRQmRXMXZpX0NEcW5BZlFUWWs3ZDNkWmF5SllvNjFTcGp5MDVEZ0JnWGE3V21DSjl4YVgyT1AtTVRuak5WNG82QmhhX2xMRjFZaGJSYVBMRU9FVGNZdG5UbVQ2Q1R5aEE3WXduZmdiZ3NCdEV6RkZyb0NzLVRwN0NVZUpPSFBrRFladE1JT3F0SS1NWHJuUXNZaHJfS1VFTUppd3cwMjdHVFJrMWg1a1g4bS1hTnlRNmFjNEk5Q2pMVXFUWGVKeDlpMW1KcXBTb0liMHFNekhTZkF4SmgxS2VzdGlyeEZmWjFLNzZuREVNMU11ZlZlUU12a05lT185dzhHQ29wZE11V3NVa1VuR19zOVFhNTZMN2tteFdmQ0JYZUNOLURvTTJRMXJvWkZtalNWR2Q2YzlSR281YWQ4WllrWFRONm1nYTVuRVZ3eHJ5MW1uMjBta0dRQzZVdTNLbW9WcF96bWJGTUlVNDV1cUIwNFVwWDNZX2FmVE4tQ2JDSU9xbGtCdHhHcUxTX0g2MkY5eVlsZ3lyaXJxR3dNX0VWTGZXcUdGdGxrWHB6Nlpwd0dtWWx3RS1QLVdSUXJwaXV3ZUhHMFpUa3pUQVpfdGw1WnZtUXFidkJDT0hXdkRSUkdENlRuY1k5OGhUd0U3eldzR3FXT1BCeHI4dHVjaVhwa2lzRmJKS2hfQlBqc05iaEVKZmRCVjg0ZnMzZ2lIWnNlbEExYVVnTWo1NkpzQWVZQjRzRWFndUJLd1hzRmVRY1B4ZFFNdjFxd0EzRWVNZV9nWUlYUkdHUl9NZ0JWMGNSWDBQdUg4MGppUnBsUmcwVzVJdXRKdkRxYjNzaDJuSTJibHhPWHR2cU5TVVV2aHhzbUxkSmRaUFI1OHNsSXI0cFNGNnc1UTVIbER0UlVvcmZlZzVLbmlvZkhFZ0VHN3lsaV90bThYSWprdG9LaElWUFlnQzlxOUxNeXJad1JPVkluVHdPSWMwakcxVERwNXRHMUY0eDVDXzJlV2tVb2V1dnphMDVQbjdWQnRCWmdZMkVwSEY0blJsX1JJaVB3TU9RSVJYa0JWTGRkX29TTDJJUUZSNXdDZXNQeHlQWi1DR2hoTFl2ZV8xNnhsSzM4N1FMQmRxR0NhdnVJNDlPMmhxZlFlMXJOT0kyR0h4c2M2VEQtS2dILXI3clZjcEZTTXJNSmF1bmg5MGw4RG80OXN2am9YaG5HUFNaVDNlQzk1OTJtWlF0ZmtZZ2FLaUhLam5BMThJVGdDcXBfNFRRd1k3WEtsazZVUWtyXzJTWFdsNnVmSlVrb0ZDQ2VZc3N4NEM0azBLX3ZSWEtsQk9USEgwdDllZ1FleU5hUEV4dVd1UT09)
        IOS_FIREBASE_SECRET: Encrypted(Z0FBQUFBQmdSY0V3NXE2SUxQR3NHTXkyQjBvMDFJS1hEQURXOE1Xb1RhbTdvRjc0MHNzQW5ub01ES2psaE1QOVQ5ajlXM0gtUm9aMkw2VF9UUlltYmRCSUhMZ09FaWstbGsyMFMzSUt3bXhNdXhlQ05qel9fYzBLR2NhMVp3bFVWVDRkdG03d3BZZ3hIamxaN28wbVgwQ09wUS1Xb2xWaVo4WTU1Z2djWDVlM2s2VDVtSWxrX0s4TlhHQUJPc1lHVm8xbkJTVjc2S19TSEw0UVY3dDR2LXUzQzNqbGxWVjVSeWJfSU9ERHFIV1lLRW9hQk0zaUFwWHRoQXVRRTl0TXphaHdIVmc3cm90bVA1UFJxcVMycnhXaHRfQ3NIMDREelg5M2VEQjhCeVNDbF9hNmFHdlVsYWpYUmYwSFZzY2hHN0ZKV2NUX2V1dlZMdWxRTHduLVp3MUtsVEd4bDh6MkNrY1I4YVc5OU5YT1BlcHdQXzZjdTZvM3VFdnBaamNEU3BrSDVzbFd6cmVYcDhaQnZpTFROOVJ4T3I5WUcxeFNZRHpTLWg1N3pfTTR2QWFKenRIZlE3MDVsZ2pfRXQ0c05vOW5RaWpGWlRSRVk3UEk2U2EyeGFMS1RWT3kxTmVpbmUxclkyVi1lX2pScnBCcG53YTJiaGlvMjBVRlRsaWx5djhoT2xPaEx0SS11UUJvV3Y5aXpZZXlpeUVoWXRoZFJJVnJpSElzNzlWX1BoTm8yaGE0SHhYSFBiUkNBYUM1djZNVzBwYkVKZE5JLU5Sbkt0RllEcXFnSDRIbW1QMEV4UkdyOE5EcTBDTkR2UTY5UlBRYjgtbkdQQnREU1R1LXk3XzFZdUFwWUVRNEJ3UHdHcUN0a0R4eE92UkRHdjZZcUh5b0o0bGdDdHRYWUlqdjNOeE1RMzJ4NzNDQWNISk92WURqU3U0Y1RJcEM1OXp2TFhJekRQNzZpOTVOaVY1djVDOEJIS01zSk5rVVNqQTE1aDN0cnFrengwbklYWVk4c00wRDNJLVhIZU5wVTBpT3Y3UDhrajdsX3JFQjA0bHJHMjJrY0NZX1NHQVhIOUs0NjJXWGxwbzlyS292bWdhQVBhNkFKdlpTSzBxTjJxRnlST280aXUxRlh5bUllalpUWTI3SURzbjl6UTloMURRRUJLQ1Roc2w5UjNTTjRfNzBjeUJ3bnRUM1BJb3hWQ0cyVXhDUjRRaVNkXzNPUklHV2RtZkRxUXVFZThZV0o4TnA1NF9uMzNwX2owYTZ5ZEowbXRpTHZ4RjdHWVRWMTYzd2NGYTBKTGpRMkNrY0ZsMHJCQy1BcVBZcWpBLWE4OXlNT0VZRXI5Y1RJTXpQaWNGN3hiOU4xOEZlQ1ZQcU13T3Y3bVkxbTQ1Zk84VW5KV3c5SWVHa3RsYkRHMDR2a0RKQ3JjbFAyQzJnN3llMXpUTUROOG96V3JkUUI2elZfRjItVEp3MFhLUlgwRFRqMVZTZksyMU03eHRBQnRQYVN1WWlUSWlhSGk4QXZDUUp5SkMySThrXzIzdi1hRW13RXNseDBKRTZDbmRRaWQ2ZmZiU0QwTGpNT19jcGlwX2IxNk55aW9mZGRIRW5VRGNQWWVGUDlibmU5LUpiSEdaY3FKcW1LYlZ4c1pEMkVVOEVzNWxZZXZTU3BodGUxV3NtX0JIVzgyLWgxV1ZWbVZCb0ItRzBFdTJPcHc3cUFzZXhFMG9oQ0hBOGdPeDdGSkp4ZUxyUmZ3bmQ5RVVpUk96NEp4OXNfdEFzdFktWkJoaTJfdmRxUzR0aC1CTktWN3lUR29GV2JGVEZ6eW1EQnpVR3p6V2xmcHV5cU9PMlpWRDVtSS13V0dRQ3RUX3NyMlJKRDNWWXVmRHk5TTB6RDExNWZYQWJGZFJzMkp3RVlKVEJtMFM4VkloUmtRNk5HV0JpbURZdXpZdXQ5ZlRYejdhNHdHYlNNZmE5ZTI5aEJiRGRXVHF6bTdoZ2JSbkRUd1RwV2paeTJVNHAtc1FMXy0xNk9JZVU2UkJncU5MTlByeFhhcXplOHJqQmJPTnpRN0NTa2JOaW5keS1Ld1IwTVdmdW1pblFTRnpFclRsVlZTMFZKRU96c0s2Sy1XZmZqc29iR19OV1Blc0dSNHJTMWVma1RFb3FDdUd6d0wwYlNkb2stakFTN29aVVYxczRPTWhmRUQxZUZsaldrYlprRVFzVWo0Z3ZscVFvYXE4YTZ4eHJUWWlKX2tJT1hkbFN5bXNjM0RvU1ptZUVxZnkyaFh6NXRGZ25zNEVVRk0xMF9odUFSUWx5OVJhSENYMDdRdzNvclBNX3BsRUUtNHI1NC04Qld3R0FFazF5V0t3a0xoWFlVejlYazJKd0V4UUFjTjRYR1Z6RklfM21RT3pMa0kxNnFTWm9jRTg3RnVVQlVsdlZybzc3RVl2c1BjNzItN0IzTjBYX0JNLW93ZnVpdGpWenAtX3UtRTBBNWROb0JUdGRsQ19kRW5VMGRHWjV0enhzOTBuSlhoTXBDYk9xSDB3UWRaMUhSQk5OWGhJenpyZFIzMHlXOFVHNFRkN0hKV29BaGl3YmE3Y01lbkNNeVRTTjhTdEZNQnFQS3VDN1NFd0drTEJqV1lCcFhPQnlpRVRfd1d3T3ZaQ09QSzhhY1dWOUFMMndXSXJ5cXZHZFZOS1hBMG5nSUxtYndqMUZuY2RSV3BqQjFwekVOaUlRSlFSb0FhWE1xdndZM2xSaERkLUhHaVVtM3c3Nm9ubDJhR0FNNTQ2N1FpM3lINHVIVV9fUk5EekszbXFULTgxaUt0XzVONFhIVUd6RldQVHl3aFYzLTR4bzAzQ2pJVVRqR1AtTnlLQ01pYjZSbkxmQWtLeDFWbHdIN1RiV2NHYkk5SC16S042azRDR3dtWTBSNllLY0gtV0lwcnV1N2JwVWJkUWRGV3BfY0pTY0xfbVRha21MNFVSQUZXSmtaQ1k2VjhrOUVCVWRjM1N0WXJFREdvMUFkMG1GR2lnWmtDLUYxTG9yb1VQZExhRUtwbDNqbk1KNnd5SGtlQlRFOWc0TjRZU2NGS3pjT1BTREMyWlhvN1RXZFpNTUpodEkzdFhTVGhaMVhMaW03TE02b3V3OG1tcjdGRV9IVkh1VjJuNVhOcEtmNFFRYWNyS0JKdnBiMXcyelZPZDB0TUZIWWh4by1BSHF4d3JyV3c9PQ==)
    cache:
      cache_paths:
        - $FLUTTER_ROOT/.pub-cache
        - $HOME/.gradle/caches
    scripts:
      - name: Set up debug keystore
        script: |
          rm -f ~/.android/debug.keystore
          keytool -genkeypair \
            -alias androiddebugkey \
            -keypass android \
            -keystore ~/.android/debug.keystore \
            -storepass android \
            -dname 'CN=Android Debug,O=Android,C=US' \
            -keyalg 'RSA' \
            -keysize 2048 \
            -validity 10000

      - name: Set up local properties
        script: |
          echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"

      - name: Get Flutter packages
        script: |
          cd . && flutter packages pub get

      - name: Decrypt Firebase environment vars
        script: |
          #!/bin/sh
          echo $ANDROID_FIREBASE_SECRET | base64 --decode > $FCI_BUILD_DIR/android/app/google-services.json

          echo "Listing android Directory to confirm the google-services.json is there! "
          ls android/app/

      - name: Build for Android
        script: |
          cd . && flutter build apk --debug

    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - sbis1999@gmail.com
